<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ"
    crossorigin="anonymous">
  <link rel="stylesheet" href="../../css/style.css">
</head>

<body>
  <div class="nav">
    <div id="bread-crumps"></div>
    <div class="search">
      <span>&#64;</span>
      <input type="text">
      <button>search</button>
    </div>
  </div>
  <div class="header">
    <div id="menu"></div>
  </div>
  <div class="content">

    <div class="info">
      <div class="info-left">
        <h4 class="links-themes-title">Animation</h4>
        <!-- TABS NAV-->
        <ul class="tabs-nav-list">
          <li class="tabs-nav-item active" onclick="openMark(event,'mark1')">setInterval & setTimeout</li>
          <li class="tabs-nav-item" onclick="openMark(event,'mark2')">Scroll</li>
          <li class="tabs-nav-item" onclick="openMark(event,'mark3')">Делегирование</li>
          <li class="tabs-nav-item" onclick="openMark(event,'mark3')">title</li>
        </ul>
        <!-- END NAV -->
      </div>
      <div class="info-right">
        <div id="extra-menu" class="links-themes-list"></div>
        <ul class="tabs-content-list info-right-content">
          <li id="mark1" class="tabs-content-item active">
            <!-- 1 -->
            <div class="sub-title">Main</div>
            <div class="title">Синтаксис</div>
            <fieldset>
              <legend>1. setTimeout</legend>
              <blockquote>
                Сработает через ...ms и прекрат свое существование
              </blockquote>
              <pre class="code">
                <code>
                  setTimeout(function() { 
                    i = 0; 
                    console.log(i++);
                  }, 1000);

                  <b>Можно задать параметры, которые перейдут ф-ции</b>
                  setTimeout(func, 1000, "Привет", "Вася"); // Привет, Вася
                </code>
              </pre>
            </fieldset>
            <fieldset>
              <legend>2. setTimeout - рекурсивный</legend>
              <blockquote>
                Это удобно потому, что вам не нужно очищать такой тайм-аут, ведь когда анимация закончится, новый тайм-аут просто не будет установлен. И во-вторых, в отличие от интервала, все итерации такого тайм-аута будут выполнены строго последовательно и только тогда, когда изменение параметров одной итерации закончено, поэтому не будет ситуации "гонки выполнения".
              </blockquote>
              <pre class="code">
                <code>
                  <b>Скелет</b>
                  setTimeout(function () { 
                    /* Тут изменение параметров */ 
                    if ( /* условие срабатывания итерации */ ) setTimeout(arguments.callee, 0); 
                  }, 0);

                  <b>Примерно так это происходит</b>
                  var element = document.getElementById("example"); 
                  var from = 0; // Начальная координата X 
                  var to = 500; // Конечная координата X 
                  var duration = 1000; // Длительность - 1 секунда 
                  var start = new Date().getTime(); // Время старта 
                  
                  setTimeout(function() { 
                    var now = (new Date().getTime()) - start; // Текущее время 
                    var progress = now / duration; // Прогресс анимации 
                     
                    var result = (to - from) * delta(progress) + from; 
                    element.style.left = result + "px"; 
                    if (progress < 1) // Если анимация не закончилась, продолжаем 
                    setTimeout(arguments.callee, 10); 
                  }, 10);

                </code>
              </pre>
            </fieldset>
            <fieldset>
              <legend>3. setInterval</legend>
              <blockquote>Будет выполнять ф-ю с интервалом в 1 сек</blockquote>
              <pre class="code">
                <code>     
                  let i = 0; 
                  function timer() { 
                    return console.log(i++) 
                  }; 
                  
                  setInterval(timer, 1000);
                </code>
              </pre>
            </fieldset>
            <fieldset>
              <legend>clearInterval</legend>
              <blockquote>clearInterval - остановит setInterval. Его нужно использовать в связке setTimeout</blockquote>
              <pre class="code">
                <code>     
                  clearInterval(timerId)
                  <b>Пример</b>
                  let i = 0; 
                  let timer = setInterval(function timerFunc() { 
                    return console.log(i++) 
                  }, 500); 
                  
                  setTimeout(function() { 
                    clearInterval(timer);
                  }, 2000);
                </code>
              </pre>
            </fieldset>
            <fieldset>
              <legend>setTimeout - рекурсивный вызов</legend>
              <blockquote>setTimeout гарантирует паузу между вызовами так как он рекурсивный</blockquote>
              <pre class="code">
                <code>     
                  let timerId = setTimeout(function tic() { 
                    console.log('tic'); 
                    timerId = setTimeout(tic, 500); 
                  }, 500);
                </code>
              </pre>
            </fieldset>

            <fieldset>
              <legend>setInterval ^ setTimeout</legend>
              <h3>setInterval</h3> - назначает повторяет выполнение одной функции n-е к-во раз
              <blockquote>
                setInterval - задает интервал повторного выполнения функции, setTimeout - прекращает это. Третий пример с использованием
                рекурсивного setTimeout - true way.
              </blockquote>
              <pre class="code">
                <code>     
                  getIntervalgetTimeout.addEventListener('click', startTimer); 
                  function timerId() { 
                    div('spoon', setIntervalSetTimeout); 
                  };
                  function startTimer() { 
                    let variableTimerId = setInterval(timerId, 500); 
                    setTimeout(function () { 
                      clearInterval(variableTimerId);
                      div('stop', setIntervalSetTimeout); 
                    }, 1999); 
                  }
                </code>
              </pre>
            </fieldset>
            <!-- end 1 -->
          </li>
          <li id="mark2" class="tabs-content-item">
            <!-- 2 -->
            <div class="sub-title">Main</div>
            <div class="title">Scroll, Position</div>
            <fieldset>
              <legend>1. Подробно о позиции</legend>
              <h3>Основной метод для управления свойствами – Object.defineProperty.</h3>
              <pre>
                elem.getBoundingClientRect() // получить координаты
                var elem = document.elementFromPoint(centerX, centerY); // по координатам получить элемент
              </pre>
            </fieldset>
            <fieldset>
              <legend>2. Плавная прокрутка вверх по кнопке</legend>
              <h3>Основной метод для управления свойствами – Object.defineProperty.</h3>
              <pre>
                setTimeout(function() { window.scrollTo(0,80); }, 1000);
              </pre>
            </fieldset>
            <fieldset>
              <legend>3. Найти координаты элемента функцией</legend>
              <blockquote>
                Отступы и величина – Object.defineProperty. 
                pageY(X)Offset - насколько проскролилась страничка
              </blockquote>
              <pre>
                function getCoords(elem) { 
                  var box = elem.getBoundingClientRect(); 
                  return { 
                    top: box.top + pageYOffset, 
                    left: box.left + pageXOffset 
                  }; 
                };
              </pre>
            </fieldset>
            <fieldset>
              <legend>4. Scroll</legend>
              <pre>
                <code>
                  <b>Величина скрола</b>
                  window.onscroll = function() { 
                    console.log(this.pageYOffset) 
                  }

                  <b>Величина скрола в элементе</b>
                  window.onscroll = function () { 
                    var scrolled = window.pageYOffset || document.documentElement.scrollTop; document.getElementById('showScroll').innerHTML = scrolled + 'px'; 
                  }

                  <b>Страницу вверх(без замедления)</b>
                  window.scrollTo(0,0);

                  <b>Проскролить элемент вниз на 10px</b>
                  elem.scrollTop += 10

                  <b>Получить инфу по расположению элемента</b>
                  elem.getBoundingClientRect()
                </code>
              </pre>
            </fieldset>
            <fieldset>
              <legend></legend>
              <pre>
                <code>
                  <ul>
                    <li> offsetParent – «родитель по дереву рендеринга» – ближайшая ячейка таблицы, body для статического позиционирования или ближайший позиционированный элемент для других типов позиционирования.</li>
                    <li>offsetLeft/offsetTop – позиция в пикселях левого верхнего угла блока, относительно его offsetParent.</li>
                    <li>offsetWidth/offsetHeight – «внешняя» ширина/высота блока, включая рамки.</li>
                    <li>clientLeft/clientTop – отступ области содержимого от левого-верхнего угла элемента. Если операционная система располагает
                    вертикальную прокрутку справа, то равны ширинам левой/верхней рамки, если же слева (ОС на иврите, арабском), то clientLeft включает в себя прокрутку.</li>
                    <li>clientWidth/clientHeight – ширина/высота содержимого вместе с полями padding, но без полосы прокрутки. scrollWidth/scrollHeight
                    – ширина/высота содержимого, включая прокручиваемую область. Включает в себя padding и не включает полосы прокрутки</li>
                    <li>scrollLeft/scrollTop – ширина/высота прокрученной части документа, считается от верхнего левого угла.</li>
                  </ul>
                </code>
              </pre>
            </fieldset>
            <!-- end 2 -->
          </li>
          <li id="mark3" class="tabs-content-item">
            <!-- 3 -->
            <div class="sub-title">Main</div>
            <div class="title">Делегирование</div>
              <fieldset>
                <legend>1. event.target</legend>
                <blockquote>
                  Делегирование - позволяет задать для всех потомков событие, которое вешаем только на предка.
                  Когда у нас например список карточек, которые закрываются по клику. И карточек может быть бесконечно много.

                  C помощью event.target мы можем узнать на кого имеено мы кликнули в пределах нашего родителя. 
                </blockquote>
                <pre class="code">
                  <code>
                    table.onclick = () => console.log( event.target )
                    
                    table.onclick = foo; 
                    function foo(target) {
                    let sm = event.target;
                    console.log(sm);
                    }
                  </code>
                </pre>
              </fieldset>
            <fieldset>
              <legend>2. list Menu on click</legend>
              <blockquote>
                Тут мы обрабатываем пункты меню. 
              </blockquote>
              <pre class="code">
                <code>
                  <b>html</b>
                  div id="menu">
                    button data-action="save">   Сохранить /button>
                    button data-action="load">   Загрузить /button>
                    button data-action="search"> Поиск     /button>
                  /div>

                  <b>js</b>
                  function Menu(elem) {
                    this.save =   () => alert( 'сохраняю' );
                    this.load =   () => alert( 'загружаю' );
                    this.search = () => alert( 'ищу' );
                  
                    var self = this; //!! чтобы сохранить ссылку на объект Menu
                  
                    elem.onclick = function(e) {
                      var target = e.target;
                      var action = target.getAttribute('data-action');

                      if (action) self[action]();
                    };
                  }
                  
                  new Menu(menu);
                </code>
              </pre>
            </fieldset>
            <fieldset>
              <legend>3. table.onClick на все td</legend>
                <pre class="code">
                  <code>
                    var selectedTd;
                    
                    table.onclick = function(event) {
                      var target = event.target; // где был клик?
                    
                      if (target.tagName != 'TD') return; // не на TD? тогда не интересует
                    
                      highlight(target); // подсветить TD
                    };
                    
                    function highlight(node) {
                      if (selectedTd) selectedTd.classList.remove('highlight');
                    
                      selectedTd = node;
                      selectedTd.classList.add('highlight');
                    }
                  </code>
                </pre>
            </fieldset>
            <!-- end -->
          </li>
          <li id="mark4" class="tabs-content-item">
            <!-- 4 -->
            <div class="sub-title">Main</div>
            <div class="title">Title</div>
            <fieldset>
              <legend>1. title</legend>
              <pre class="code">
                <code>
                </code>
              </pre>
            </fieldset>
            <!-- end -->
          </li>
        </ul>
      </div>
    </div>
  </div>

  <script src="../../js/main/hilight.js"></script>
  <script src="../../js/main/dynamic.js"></script>
  <script src="../../js/main/main.js"></script>
</body>

</html>